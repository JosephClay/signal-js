!function(a,b){"function"==typeof define?define(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:this[a]=b}("signal",function(a,b){function c(){this._active={}}var d=function(a){return function(b){return a.call(b,0,1)[0]}}([].splice),e=function(a){for(var b,c,d=arguments,e=1,f=d.length;f>e;e+=1){c=d[e];for(b in c)a[b]=c[b]}return a},f={},g=0,h=function(){return g++},i=/(?:([\w-]+):)?([\w-]*)(?:.([\w-]+))?/,j=function(a){var c=i.exec(a);return{h:c[1]===b?"":c[1],e:c[2]===b?"":c[2],ns:c[3]===b?"":c[3]}},k=function(a,b,c){c[a]=c[a]||{},e(c[a],b[a]),delete b[a]},l=function(a,b){b=b||[];for(var c,d=0,e=a.length;e>d;d+=1)if(c=a[d],c&&c.apply(null,b)===!1)return},m=function(a,b){var c=b[a.h]||(b[a.h]={}),d=c[a.e]||(c[a.e]={}),e=d[a.ns]||(d[a.ns]=[]);return e},n=function(a,b){var d="function"==typeof a;d||(b=a);var f=function(){var b=c.apply(this,arguments);return d&&(b=a.apply(this,arguments)),b};e(f,c);var g=function(){};return g.prototype=c.prototype,f.prototype=new g,e(f.prototype,c.prototype,b),f.prototype.constructor=a||f,f};c.extend=n,c.prototype={constructor:c,construct:function(){var a=new c;return singal.extend=n,a},subscribe:function(a,b){var c=this._subs||(this._subs={}),d=h(),e=c[a]||(c[a]=[]);return b.__subid__=d,e.push(b),d},unsubscribe:function(a,b){var c=this._subs||(this._subs={}),d=c[a];if(d){for(var e=0,f=d.length;f>e;e+=1)if(d[e].__subid__===b)return d.splice(e,1),!0;return!1}},dispatch:function(){for(var a,b=this._subs||(this._subs={}),c=arguments,e=d(c),f=b[e]||(b[e]=[]),g=0,h=f.length;h>g;g++)a=f[g],a&&a.apply(null,c)},disable:function(a){var b=this._active,c=this._inactive||(this._inactive={});return k(a,b,c),this},enable:function(a){var b=this._active,c=this._inactive||(this._inactive={});return k(a,c,b),this},on:function(a,b){var c=f[a]||(f[a]=j(a));return m(c,this._active).push(b),this},bind:function(){this.on.apply(this,arguments)},off:function(a){var b=this._active,c=f[a]||(f[a]=j(a));if(""===c.e){var d,e,g=b[c.h];for(d in g)for(e in g[d])e===c.ns&&(b[c.h][d][e].length=0)}else""!==c.ns?b[c.h]&&b[c.h][c.e]&&b[c.h][c.e][c.ns]&&(b[c.h][c.e][c.ns].length=0):b[c.h]&&(b[c.h][c.e]={"":[]});return this},unbind:function(){this.off.apply(this,arguments)},once:function(a,b){var c,d=!1;return this.on(a,function(){return d?c:(d=!0,c=b.apply(this,arguments),b=null,c)})},trigger:function(){var a=arguments,b=this._active,c=d(a),e=f[c]||(f[c]=j(c)),g=m(e,b);if(""!==e.ns)l(g,a);else{var h,i=b[e.h][e.e];for(h in i)l(i[h],a)}return this},listenTo:function(a,b,c){return a.on(b,c),this},stopListening:function(a,b){return a.off(b),this}};var o=new c;return o.extend=n,o}(this));
//# sourceMappingURL=signal-0.0.2.min.map