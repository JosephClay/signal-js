/*! signal-js - v0.0.4 - 2014-10-27 %>
 * https://github.com/JosephClay/signal-js
 * Copyright (c) 2013-2014 Joe Clay; License: MIT */
!function(t,n){"function"==typeof define?define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:this[t]=n}("signal",function(e){function n(){this._active={}}var v=[].splice,s=function(n){return v.call(n,0,1)[0]},i=function(i){for(var n,t,r=arguments,e=1,u=r.length;u>e;e+=1){t=r[e];for(n in t)i[n]=t[n]}return i},t={},l=0,p=function(){return l++},_=/(?:([\w-]+):)?([\w-]*)(?:.([\w-]+))?/,u=function(t){var n=_.exec(t);return{h:n[1]===e?"":n[1],e:n[2]===e?"":n[2],ns:n[3]===e?"":n[3]}},a=function(n,e,t){t[n]=t[n]||{},i(t[n],e[n]),delete e[n]},h=function(i,n){n=n||[];for(var t,e=0,r=i.length;r>e;e+=1)if(t=i[e],t&&t.apply(null,n)===!1)return},o=function(n,t){var e=t[n.h]||(t[n.h]={}),i=e[n.e]||(e[n.e]={}),r=i[n.ns]||(i[n.ns]=[]);return r},r=function(e,r){var u="function"==typeof e;u||(r=e);var t=function(){var t=n.apply(this,arguments);return u&&(t=e.apply(this,arguments)),t};i(t,n);var s=function(){};return s.prototype=n.prototype,t.prototype=new s,i(t.prototype,n.prototype,r),t.prototype.constructor=e||t,t},f=function(){var t=new n;return t.extend=r,t};n.extend=r,n.prototype={constructor:n,construct:f,create:f,subscribe:function(n,t){var e=this._subs||(this._subs={}),i=p(),r=e[n]||(e[n]=[]);return t.__subid__=i,r.push(t),i},unsubscribe:function(e,i){var r=this._subs||(this._subs={}),n=r[e];if(n){for(var t=0,u=n.length;u>t;t+=1)if(n[t].__subid__===i)return n.splice(t,1),!0;return!1}},dispatch:function(){for(var n,e=this._subs||(this._subs={}),i=arguments,r=s(i),u=e[r]||(e[r]=[]),t=0,o=u.length;o>t;t++)n=u[t],n&&n.apply(null,i)},disable:function(n){var t=this._active,e=this._inactive||(this._inactive={});return a(n,t,e),this},enable:function(n){var t=this._active,e=this._inactive||(this._inactive={});return a(n,e,t),this},on:function(n,e){var i=t[n]||(t[n]=u(n));return o(i,this._active).push(e),this},bind:function(){this.on.apply(this,arguments)},off:function(i){var e=this._active,n=t[i]||(t[i]=u(i));if(""===n.e){var r,s,o=e[n.h];for(r in o)for(s in o[r])s===n.ns&&(e[n.h][r][s].length=0)}else""!==n.ns?e[n.h]&&e[n.h][n.e]&&e[n.h][n.e][n.ns]&&(e[n.h][n.e][n.ns].length=0):e[n.h]&&(e[n.h][n.e]={"":[]});return this},unbind:function(){this.off.apply(this,arguments)},once:function(i,t){var n,e=!1;return this.on(i,function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)})},trigger:function(){var e=arguments,r=this._active,i=s(e),n=t[i]||(t[i]=u(i)),a=o(n,r);if(""!==n.ns)h(a,e);else{var c,f=r[n.h][n.e];for(c in f)h(f[c],e)}return this},listenTo:function(n,t,e){return n.on(t,e),this},stopListening:function(n,t){return n.off(t),this}};var c=new n;return c.extend=r,c}());